# 3.1 对象引用与垃圾回收

## 对象与变量
相等性和标识

函数默认参数是函数的一个属性
默认值在定义函数时计算（通常在加载模块时），因此默认值变成了函数对象的属性
如果默认值是可变对象，而且修改了它的值，那么后续的函数调用都会受到影响


## del 和垃圾回收
del：
  - del 语句删除名称，而不是对象
  - 仅当删除的变量保存的是对象的最后一个引用，或者无法得到对象时,对象才会呗删除
  - 重新绑定也可能会导致对象的引用数量归零，导致对象被销毁

\__del__:
  - 将销毁实例时， Python 解释器会调用 __del__ 方法，给实例最后的机会，释放外部资源

CPython对象删除：
  - CPython 会在对象上调用 __del__ 方法（如果定义了），然后释放分配给对象的内存


## 弱引用
弱引用：
  - 定义：弱引用不会增加对象的引用数量
  - 应用：弱引用在缓存应用中很有用

所指对象:弱引用的目标对象

局限：
  - 基本的 list 和 dict 实例不能作为所指对象，但是它们的子类可以
  - set 实例可以作为所指对象，用户定义的类型也没问题
  - int 和 tuple 实例不能作为弱引用的目标，甚至它们的子类也不行
  - 原因：与CPython 实现细节有关


## weak 模块:
### 底层接口
  - wref = weak.ref(obj): 获取所指对象  
    wref():返回被引用对象

### WeakValueDictory类
作用：
  - 一种可变映射，里面的值是对象的弱引用
  - 被引用的对象被当作垃圾回收后，对应的键会自动从 WeakValueDictionary 中删除
  - 经常用于缓存

WeakKeyDictionary：
  - 键是弱引用

## 不可变对象

## 总结
变量保存的是引用：
  - 简单的赋值不创建副本
  - 对 += 或 \*= 所做的增量赋值来说，如果左边的变量绑定的是不可变对象，会创建新对象；如果是可变对象，会就地修改
  - 为现有的变量赋予新值，不会修改之前绑定的变量 -- 重新绑定
  - 函数的参数以别名的形式传递,函数可能会修改通过参数传入的可变对象
  - 使用可变类型作为函数参数的默认值有危险，因为如果就地修改了参数，默认值也就变了，这会影响以后使用默认值的调用

## 延伸阅读
### Python:
标准库

### blog:


### 实用工具  

### 书籍:

## 附注
